server:
  port: 8085

logging:
  level:
    com.example.mcpserver: INFO
    org.springframework.ai.mcp: DEBUG
    org.springframework.ai: DEBUG
    reactor.netty.http.server: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: "health,info,metrics,mappings"
  endpoint:
    health:
      probes:
        enabled: true

spring:
  application:
    name: mcp-server
  ai:
    ollama:
      base-url: ${OLLAMA_BASE_URL:http://ollama:11434}
    mcp:
      server:
        enabled: true
        protocol: STREAMABLE
        # (optionnel si tu veux forcer l’endpoint, sinon /mcp par défaut selon la doc)
        streamable-http:
          mcp-endpoint: /mcp
        annotation-scanner:
          enabled: true
          base-packages:
            - com.example.mcpserver.tools
    vectorstore:
      qdrant:
        host: ${QDRANT_HOST:vector-db}
        port: ${QDRANT_PORT:6333}
        collection-name: mcp_documents
        api-key: ${QDRANT_API_KEY:}
    embeddings:
      metadata-mode: storage

mcp:
  workspace-root: ${MCP_WORKSPACE_ROOT:workspaces}
  spring-source:
    cache-root: ${MCP_SPRING_CACHE_ROOT:spring-sources}
    default-max-files: ${SPRING_SOURCE_MAX_FILES:2000}
    include-tests: ${SPRING_SOURCE_INCLUDE_TESTS:false}
  rag:
    allowlist:
      - https://docs.spring.io
      - https://github.com
    max-content-length: ${RAG_MAX_CONTENT_LENGTH:1048576}
    chunk-size: ${RAG_CHUNK_SIZE:800}
    chunk-overlap: ${RAG_CHUNK_OVERLAP:80}
    collection: ${RAG_COLLECTION:mcp_documents}
    baseline-do-ingest: ${RAG_BASELINE_DO_INGEST:false}
    text-normalization: true
